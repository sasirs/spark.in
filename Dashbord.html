<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>HomePage</title>

        <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
        <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
        <script src=" https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
        <link href="  https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
        <script src="https://cdn.datatables.net/1.11.6/js/jquery.dataTables.min.js"></script>


        <script src="js/scriptManager.js"></script>

        <!-- <script src="js/scriptManager.js"></script>
        <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
        <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
        <script src=" https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

        <link href="  https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet"> -->




        <!-- others sample commit check-->
        <style>
            .formstart {
                color: red;
                font-size: 5px;
                transform: translateY(-6px);
            }
        </style>
        <script>
            function updateUser(id, formid) {
                //console.log("Updating user details");
                var param = getFormValues(formid);
                console.log(param);
                var url = "pushEngine/user/update?" + param;

                getRequestTo(url, "POST", function (userData) {
                    //console.log("response " + userData);
                    // alert(userData);
                    if (userData == "saved successfully!") {
                        document.getElementById("closemodal").click();
                    }
                });
            }

        </script>

        <style>
        </style>
    </head>

    <body>
        <div id="message-container"></div>

        <div class="container-fluid">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg navbar-light bg-white">
                <!-- Container wrapper -->
                <div class="container-fluid">
                    <!-- Toggle button -->
                    <button class="navbar-toggler" type="button" data-mdb-toggle="collapse" data-mdb-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="fas fa-bars"></i>
                    </button>

                    <!-- Collapsible wrapper -->
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <a class="navbar-brand" href="#" onclick="reload()"><i class="bi bi-x-diamond-fill p-2"></i><span class="brandname">Spark</span></a>
                        <nav class="topnav ms-2">
                            <div class="nav nav-underline" id="nav-tab" role="tablist">
                                <a class="explorelink nav-link active" style="display: flex;align-items: center;" id="explorelink" data-bs-toggle="tab" data-bs-target="#" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Explore</a>
                                <a class="dashbordlink nav-link" style="display: flex;align-items: center;" id="dashbordlink" data-bs-toggle="tab" data-bs-target="#" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Dashbord</a>
                            </div>
                        </nav>
                        <span class="search ms-5 align-items-center ">
                            <div class="body" align="center">
                                <input id="search" type="text" dir="ltr" class="form-control instrument selection" autocomplete="off" spellcheck=false autocorrect="off" autocomplete="off" autocapitalize="off" placeholder="" tabindex="1" style="width: 30rem; font-family:Arial, FontAwesome">
                            </div>

                            <!-- <div class="ui-widget">
                                <input class="form-control instrument" autocomplete="off" id="instrument" type="search" placeholder="&#xF002; What are you looking for today?" aria-label="Search" style="width: 30rem; font-family:Arial, FontAwesome">
                            </div> -->
                        </span>
                        <!-- Left links -->
                    </div>
                    <!-- Collapsible wrapper -->

                    <!-- Right elements -->
                    <div class="d-flex align-items-center">
                        <!-- Avatar -->
                        <a href="" class="me-5">
                            <i class="fas fa-bell fa-lg"></i>
                            <span class="badge rounded-pill badge-notification bg-danger">12</span>
                        </a>
                        <div class="dropdown">
                            <a class="dropdown-toggle d-flex align-items-center hidden-arrow pe-3" href="#" id="navbarDropdownMenuAvatar" role="button" data-mdb-toggle="dropdown" aria-expanded="false">
                                <img src="https://mdbcdn.b-cdn.net/img/new/avatars/2.webp" class="rounded-circle" height="25" alt="Black and White Portrait of a Man" loading="lazy" />
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuAvatar">
                                <li style="background: #f8f8f8;">
                                    <div><img src="https://mdbcdn.b-cdn.net/img/new/avatars/2.webp" class="rounded-circle my-3 mx-3" height="42" alt="Avatar" loading="lazy" /><span>Sasikumar</span></div>
                                </li>
                                <hr class="dropdown-divider">

                                <li><a class="dropdown-item py-3" id="settingid" href="#setting-section"><i class="bi bi-gear pe-2"></i>Settings</a></li>
                                <li><a class="dropdown-item py-3" href="#"><i class="bi bi-telephone pe-2"></i>Help & Support</a></li>
                                <li><a class="dropdown-item  py-3" href="#"><i class="bi bi-moon-stars-fill pe-2"></i>Dark Mode</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><button id="logoutBtn" class="dropdown-item  py-3" href="#"><i class="bi bi-box-arrow-right pe-2"></i>Logout</button></li>

                            </ul>
                        </div>
                    </div>
                    <!-- Right elements -->
                </div>
                <!-- Container wrapper -->
            </nav>


            <!---- search container -->
            <div class="container" id="scripcontainer" style="display: none;">
                <div class="row mt-5">
                    <div class="col-md-8">
                        <div class="row">
                            <div class="card" id="scripChart"></div>
                        </div>
                        <div class="row mt-5">
                            <div class="col">
                                <div class="card" id="comprofile"></div>
                            </div>
                            <div class="col">
                                <div class="card" id="techananysis"></div>
                            </div>
                        </div>
                        <div class="row mt-5">
                            <div class="card" id="tagetchart"></div>
                        </div>
                        <div class="row mt-5">
                            <div class="card" id="financial"></div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="row">
                            <div class="card" id="rightcard">
                                <div class="card-body">
                                    <p class="heading py-2">Publish</p>

                                    <form action="" id="searchPublishform">
                                        <nav class="">
                                            <div class="nav nav-underline" id="nav-tab" role="tablist">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" name="call_type" id="call_type" value="BUY" />
                                                    <label class="form-check-label" for="inlineRadio1" checked><span class="heading2" style="border-radius: 20px;">BUY</span> </label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" name="call_type" id="call_type" value="SELL" />
                                                    <label class="form-check-label" for="inlineRadio2"><span class="heading2" style="border-radius: 20px;">SELL</span></label>
                                                </div>
                                                <!--  <a class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Buy</a>
                                            <a class="nav-link me-2" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Sell</a>-->
                                            </div>
                                        </nav>
                                        <div class="row  mt-3 mb-3">
                                            <div class="">
                                                <input type="radio" class="btn-check" name="validity" id="validity" autocomplete="off" checked />
                                                <label class="btn btn-secondary" for="option1">Intraday</label>

                                                <input type="radio" class="btn-check" name="validity" id="validity" autocomplete="off" />
                                                <label class="btn btn-secondary  ms-2" for="option2">Longterm</label>
                                            </div>
                                            <!-- <ul class="nav nav-pills " id="ex1" role="tablist">
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link active rounded-pill" id="ex1-tab-1" data-mdb-toggle="pill" href="#ex1-pills-1" role="tab" aria-controls="ex1-pills-1" aria-selected="true" style="height: 34px; width: 6rem; padding: 10px 10px 10px 20px;">Intraday</a>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link rounded-pill" id="ex1-tab-2" data-mdb-toggle="pill" href="#ex1-pills-1" role="tab" aria-controls="ex1-pills-2" aria-selected="false" style="height: 34px;  width: 6rem; padding: 10px 10px 10px 20px;">Longterm</a>
                                            </li>
                                        </ul> -->
                                        </div>

                                        <div class="row  mt-3 mb-3">
                                            <div class="qty d-flex justify-content-between">
                                                <p class="heading2">CMP </p>
                                                <input type="number" id="cmp" name="cmp" class="form-control  w-50" placeholder="0" id="staticEmail2" value="">
                                            </div>
                                        </div>
                                        <div class="row  mb-3">
                                            <div class="qty d-flex justify-content-between">
                                                <p class="pe-5 heading2">SL</p>
                                                <input type="number" class="form-control  w-50" id="stop_loss" name="stop_loss" placeholder="0" id="staticEmail2" value="">
                                            </div>
                                        </div>
                                        <div class="row  mb-3">
                                            <div class="qty d-flex justify-content-between">
                                                <p class="pe-5 heading2">TGT</p>
                                                <input type="number" class="form-control  w-50" id="target" name="target" placeholder="0" id="staticEmail2" value="">
                                            </div>
                                        </div>

                                        <div class="row d-flex justify-content-center">
                                            <button type="button" onclick="publishCall('searchPublishform')" class="btn btn-primary btn-block mb-3 w-50">Publish</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-5">
                            <div class="card" id="symbolstory"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class=" nonscripcontainer" id="nonscripcontainer" style="display: '';">

                <!-- Moving widjet -->
                <!-- <div class="tradingview-widget-container">
                    <div class="tradingview-widget-container__widget"></div>
                    <div class="tradingview-widget-copyright"><a href="https://in.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
                        {
                            "symbols": [
                                {
                                    "proName": "FOREXCOM:SPXUSD",
                                    "title": "S&P 500"
                                },
                                {
                                    "proName": "FOREXCOM:NSXUSD",
                                    "title": "US 100"
                                },
                                {
                                    "proName": "FX_IDC:EURUSD",
                                    "title": "EUR to USD"
                                },
                                {
                                    "proName": "BITSTAMP:BTCUSD",
                                    "title": "Bitcoin"
                                },
                                {
                                    "proName": "BITSTAMP:ETHUSD",
                                    "title": "Ethereum"
                                }
                            ],
                                "showSymbolLogo": true,
                                    "colorTheme": "light",
                                        "isTransparent": true,
                                            "displayMode": "regular",
                                                "locale": "in"
                        }
                    </script>
                </div> -->

                <!-- Setting section -->
                <div class="setting-section mt-4" id="settingdiv" style="display: none;">
                    <!-- <div class="settingimportdiv"></div> -->
                    <div class="container">
                        <iframe src="Settings.html" width="100%" style="height: 40rem;" scrolling="no" id="settingsframe"></iframe>
                    </div>


                </div>

                <!--Start tabs section -->
                <div class="container" id="maincontainer" style="display: '';">
                    <div class="row mt-5">
                        <div class="tabs">
                            <nav class="" id="stockNavMenus" style="display: '';">
                                <div class="nav nav-underline" id="nav-tab" role="tablist" style="transform: translateX(-14px);">
                                    <a class="nav-link active me-2" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true" style="display: '';" onclick="findAllDashbordData('#dashbordtable',  'pushEngine/calls/findAll' )">Stocks</a>
                                    <a class="nav-link me-2" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" console.timeEnd(object); role="tab" aria-controls="nav-profile" aria-selected="false" style="display: '';">Research</a>
                                    <a class="nav-link me-2" id="nav-porfolio-tab" data-bs-toggle="tab" data-bs-target="#nav-porfolio" type="button" console.timeEnd(object); role="tab" aria-controls="nav-porfolio" aria-selected="false" style="display: '';">Portfolio</a>
                                    <a class="nav-link me-2" id="nav-investments-tab" data-bs-toggle="tab" data-bs-target="#nav-investments" type="button" console.timeEnd(object); role="tab" aria-controls="nav-investments" aria-selected="false" style="display: '';">Investments</a>
                                    <a class="nav-link me-2" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#nav-contact" type="button" role="tab" aria-controls="nav-contact" aria-selected="false" style="display: '';">Report</a>
                                    <a class="nav-link me-2" id="nav-news-tab" data-bs-toggle="tab" data-bs-target="#nav-news" type="button" role="tab" aria-controls="nav-news" aria-selected="false" style="display: '';">News</a>
                                </div>
                            </nav>
                            <div class="tab-content" id="nav-tabContent">
                                <!--Start stocks section -->
                                <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab" tabindex="0">
                                    <!-- <div class="stocksimportdiv"></div> -->
                                    <div class="row">
                                        <div class="col-md-8">
                                            <!--Start Index section -->
                                            <div class="row">
                                                <p class="heading">Index</p>
                                                <div class="row">
                                                    <div class="col-sm-4 mb-3 mb-sm-0">
                                                        <div class="card ">
                                                            <div id="index1"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4 mb-3 mb-sm-0">
                                                        <div class="card">
                                                            <div id="index2"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4 mb-3 mb-sm-0">
                                                        <div class="card">
                                                            <div id="index3"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--End Index section -->

                                            <!--Start Dashbord section -->
                                            <div class="dashborddiv" id="dashborddiv" style="display: 'none';">
                                                <!-- <iframe src="Dashboard.html" width="100%" style="height: 40rem;" scrolling="no" id="researchframe"></iframe> -->

                                                <div class="container mt-5">
                                                    <div class="row mt-5">
                                                        <p class="heading">Dashbord</p>
                                                        <div class="card pb-4">
                                                            <div class="card-body dcard">
                                                                <div class="tabs mt-2">
                                                                    <div class="col-md-12">
                                                                        <table class="table">
                                                                            <tr id="dashbordhead" class="bg-light">
                                                                                <td colspan="2"><span class="tprice">195 </span>
                                                                                    <div class="total mt-2">Current Calls</div>
                                                                                </td>
                                                                                <td colspan="2" class="" style="text-align:right">
                                                                                    <div><span class="total me-2">Total Calls</span> <span id="dash-total-calls" class="tprice">95 </span></div>
                                                                                    <div><span class="total me-2">Current Calls </span> <span id="dash-current-calls" class="tprice">15 </span></div>
                                                                                    <div><span class="total me-2">Today Calls </span> <span id="dash-today-calls" class="tprice">5 </span></div>

                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                        <table class="table" style="width:100%" id="dashbordtable">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th scope="col">Date</th>
                                                                                    <th scope="col">CallType</th>
                                                                                    <th scope="col">Symbol</th>
                                                                                    <th scope="col">CMP</th>
                                                                                    <th scope="col">StoppLoss</th>
                                                                                    <th scope="col">Target</th>
                                                                                    <th scope="col">Validity</th>

                                                                                </tr>
                                                                            </thead>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>

                                                </div>
                                            </div>
                                            <!--End Dashbord section -->

                                            <div id="otherDashbord" style="display: '';">
                                                <!-- Start top gainer -->
                                                <div class="row mt-5">
                                                    <span class="heading  mt-3">Top Gainers</span>
                                                    <div class="row mt-3">
                                                        <div class="col-sm-3  mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div id="topgainers1"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="" id="topgainers2"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="" id="topgainers3"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="" id="topgainers4"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row mt-3">
                                                        <div class="col-sm-3  mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div id="topgainers5"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="" id="topgainers6"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="" id="topgainers7"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="" id="topgainers8"></div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <!--End Index section -->

                                                <!-- Start top losser -->
                                                <div class="row mt-5">
                                                    <span class="heading">Top lossers</span>
                                                    <div class="row mt-4">
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="">
                                                                        <div id="toplossers1"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="">
                                                                        <div id="toplossers2"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="">
                                                                        <div id="toplossers3"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="">
                                                                        <div id="toplossers4"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="row mt-4">
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="">
                                                                        <div id="toplossers5"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="">
                                                                        <div id="toplossers6"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="">
                                                                        <div id="toplossers7"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="">
                                                                    <div class="">
                                                                        <div id="toplossers8"></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <!--End losser section -->

                                                <!-- Start top sectors -->
                                                <div class="row mt-5">
                                                    <span class="heading">Top Sectors</span>
                                                    <div class="row mt-3">
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="card-body" style="max-height: 5rem;">
                                                                    <p class="" id="topsector1" style="color: #7c7e8c; font-weight: 500;"></p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="card-body" style="max-height: 5rem;">
                                                                    <p class="" id="topsector2" style="color: #7c7e8c; font-weight: 500;"></p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="card-body" style="max-height: 5rem;">
                                                                    <p class="" id="topsector3" style="color: #7c7e8c; font-weight: 500;"></p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="card-body" style="max-height: 5rem;">
                                                                    <p class="" id="topsector4" style="color: #7c7e8c; font-weight: 500;"></p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row mt-2">
                                                        <div class="col-sm-3 mb-3 mb-sm-0" style="max-height: 5rem;">
                                                            <div class="card">
                                                                <div class="card-body">
                                                                    <p class="" id="topsector5" style="color: #7c7e8c; font-weight: 500;"></p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 mb-3 mb-sm-0" style="max-height: 5rem;">
                                                            <div class="card">
                                                                <div class="card-body">
                                                                    <p class="" id="topsector6" style="color: #7c7e8c; font-weight: 500;"></p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--End topsectors section -->

                                                <!-- Start topmarketcap -->
                                                <div class="row mt-5">
                                                    <span class="heading">Top by Volume</span>
                                                    <div class="row mt-4">
                                                        <div class="col-md-12">
                                                            <div id="performdiv"></div>
                                                            <!-- TradingView Widget END -->
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--End topmarketcap section -->
                                            </div>
                                        </div>
                                        <!-- Start calls -->
                                        <div class="col-md-4">
                                            <div class="row mt-2">
                                                <p class="heading">Your Calls</p>
                                                <div class="yourcalls">
                                                    <div class="row">
                                                        <div class="col-sm-12 mb-3 mb-sm-0">
                                                            <div class="card">
                                                                <div class="card-body">
                                                                    <div class="row">
                                                                        <div class="col-md-6">
                                                                            <span class="tprice ps-4" id="dash-total-calls1"></span>
                                                                            <div class="total mt-2">Total Calls</div>
                                                                        </div>
                                                                        <div class="col-md-6">
                                                                            <span class="tprice ps-4" id="dash-current-calls1"></span>
                                                                            <div class="total mt-2 ">Current Calls</div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row allcalls mt-5" id="allcalls" style="display: '';">
                                                <!-- <p class="heading mt-4">All Calls</p> -->
                                                <div class="row mt-4">
                                                    <div class="col-md-6">
                                                        <p class="heading">All Calls</p>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <span class="float-end" id="dashbordspan">Dashbord</span>
                                                    </div>
                                                </div>

                                            </div>

                                            <!-- Stock All calls section -->
                                            <div class="row mt-1" id="allcallsList" style="display: '';">
                                                <div class="row">
                                                    <div class="card" style=" max-height: 40rem">
                                                        <div class="list-group" id="allcallscard">


                                                            <!-- Static data-->
                                                            <!-- <li class="list-group-item d-flex justify-content-between align-items-center">
                                                                <div class="d-flex align-items-center">
                                                                    <img src="https://mdbootstrap.com/img/new/avatars/8.jpg" alt="" style="width: 45px; height: 45px" class="rounded-circle" />
                                                                    <div class="ms-3">
                                                                        <p class="fw-bold mb-1">Canara Bank</p>
                                                                        <p class="text-muted mb-0" style="font-size: 13px;"><span class="stoplossprc">10.0</span>&nbsp; &nbsp;|<span class="cmpprc ms-1">19.0</span> &nbsp; &nbsp;|<span class="tagetprc ms-1">19.0</span></p>
                                                                    </div>
                                                                </div>
                                                                <span class="badge rounded-pill badge-primary">1 sec ago</span>
                                                            </li> -->


                                                            <!--
                                                            <a href="#" class="list-group-item list-group-item-action" aria-current="true">
                                                                <div class="d-flex w-100 justify-content-between">
                                                                    <div class="heading2 md-1">
                                                                        <img src="https://mdbcdn.b-cdn.net/img/new/avatars/2.webp" class="rounded-circle m-1" height="25" alt="Black and White Portrait of a Man" loading="lazy" />
                                                                        Canara Bank
                                                                    </div>
                                                                    <small>1 sec ago</small>
                                                                </div>
                                                                <div class="callprice mt-2">
                                                                    <span class="stoplossprc">1</span>&nbsp; &nbsp;|
                                                                    <span class="cmpprc ms-1" style="text-align: center; display: inline-block;">19</span>
                                                                    &nbsp; &nbsp;|<span class="tagetprc ms-1">19</span>
                                                                </div>

                                                            </a>
                                                            <a href="#" class="list-group-item list-group-item-action" aria-current="true">
                                                                <div class="d-flex w-100 justify-content-between">
                                                                    <div class="heading2 mb-1">Canara Bank</div>
                                                                    <small>1 sec ago</small>
                                                                </div>
                                                                <div class="callprice mt-2"><span class="stoplossprc">19,674.25</span>&nbsp; &nbsp;| <span class="cmpprc ms-1">19,674.25</span>&nbsp; &nbsp;|<span class="tagetprc ms-1">19,674.25</span></div>
                                                            </a>
                                                             <a href="#" class="list-group-item list-group-item-action" aria-current="true">
                                                                <div class="d-flex w-100 justify-content-between">
                                                                    <div class="heading2 mb-1">Canara Bank</div>
                                                                    <small>1 sec ago</small>
                                                                </div>
                                                                <div class="callprice mt-2"><span class="stoplossprc">19,674.25</span>&nbsp; &nbsp;| <span class="cmpprc ms-1">19,674.25</span>&nbsp; &nbsp;|<span class="tagetprc ms-1">19,674.25</span></div>
                                                            </a>
                                                            <a href="#" class="list-group-item list-group-item-action" aria-current="true">
                                                                <div class="d-flex w-100 justify-content-between">
                                                                    <div class="heading2 mb-1">Canara Bank</div>
                                                                    <small>1 sec ago</small>
                                                                </div>
                                                                <div class="callprice mt-2"><span class="stoplossprc">19,674.25</span>&nbsp; &nbsp;| <span class="cmpprc ms-1">19,674.25</span>&nbsp; &nbsp;|<span class="tagetprc ms-1">19,674.25</span></div>
                                                            </a>
                                                            <a href="#" class="list-group-item list-group-item-action" aria-current="true">
                                                                <div class="d-flex w-100 justify-content-between">
                                                                    <div class="heading2 mb-1">Canara Bank</div>
                                                                    <small>1 sec ago</small>
                                                                </div>
                                                                <div class="callprice mt-2"><span class="stoplossprc">19,674.25</span>&nbsp; &nbsp;| <span class="cmpprc ms-1">19,674.25</span>&nbsp; &nbsp;|<span class="tagetprc ms-1">19,674.25</span></div>
                                                            </a>
                                                            <a href="#" class="list-group-item list-group-item-action" aria-current="true">
                                                                <div class="d-flex w-100 justify-content-between">
                                                                    <div class="heading2 mb-1">Canara Bank</div>
                                                                    <small>1 sec ago</small>
                                                                </div>
                                                                <div class="callprice mt-2"><span class="stoplossprc">19,674.25</span>&nbsp; &nbsp;| <span class="cmpprc ms-1">19,674.25</span>&nbsp; &nbsp;|<span class="tagetprc ms-1">19,674.25</span></div>
                                                            </a> -->

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-5" id="MarketOverview">
                                                <div class="col-md-12">
                                                    <span class="heading ">Market Overview</span>
                                                    <div class="card mt-3">
                                                        <div class="list-group">
                                                            <div class="tradingview-widget-container">
                                                                <div class="tradingview-widget-container__widget"></div>
                                                                <div class="tradingview-widget-copyright"><a href="https://in.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>
                                                                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
                                                                    {
                                                                        "colorTheme": "light",
                                                                            "dateRange": "12M",
                                                                                "showChart": true,
                                                                                    "locale": "in",
                                                                                        "largeChartUrl": "",
                                                                                            "isTransparent": false,
                                                                                                "showSymbolLogo": true,
                                                                                                    "showFloatingTooltip": false,
                                                                                                        "width": "340",
                                                                                                            "height": "660",
                                                                                                                "plotLineColorGrowing": "rgba(41, 98, 255, 1)",
                                                                                                                    "plotLineColorFalling": "rgba(41, 98, 255, 1)",
                                                                                                                        "gridLineColor": "rgba(240, 243, 250, 0)",
                                                                                                                            "scaleFontColor": "rgba(106, 109, 120, 1)",
                                                                                                                                "belowLineFillColorGrowing": "rgba(41, 98, 255, 0.12)",
                                                                                                                                    "belowLineFillColorFalling": "rgba(41, 98, 255, 0.12)",
                                                                                                                                        "belowLineFillColorGrowingBottom": "rgba(41, 98, 255, 0)",
                                                                                                                                            "belowLineFillColorFallingBottom": "rgba(41, 98, 255, 0)",
                                                                                                                                                "symbolActiveColor": "rgba(41, 98, 255, 0.12)",
                                                                                                                                                    "tabs": [
                                                                                                                                                        {
                                                                                                                                                            "title": "Indices",
                                                                                                                                                            "symbols": [
                                                                                                                                                                {
                                                                                                                                                                    "s": "FOREXCOM:SPXUSD",
                                                                                                                                                                    "d": "S&P 500"
                                                                                                                                                                },
                                                                                                                                                                {
                                                                                                                                                                    "s": "FOREXCOM:NSXUSD",
                                                                                                                                                                    "d": "US 100"
                                                                                                                                                                },
                                                                                                                                                                {
                                                                                                                                                                    "s": "FOREXCOM:DJI",
                                                                                                                                                                    "d": "Dow 30"
                                                                                                                                                                },
                                                                                                                                                                {
                                                                                                                                                                    "s": "INDEX:NKY",
                                                                                                                                                                    "d": "Nikkei 225"
                                                                                                                                                                },
                                                                                                                                                                {
                                                                                                                                                                    "s": "INDEX:DEU40",
                                                                                                                                                                    "d": "DAX Index"
                                                                                                                                                                },
                                                                                                                                                                {
                                                                                                                                                                    "s": "FOREXCOM:UKXGBP",
                                                                                                                                                                    "d": "UK 100"
                                                                                                                                                                }
                                                                                                                                                            ],
                                                                                                                                                            "originalTitle": "Indices"
                                                                                                                                                        }
                                                                                                                                                    ]
                                                                    }
                                                                </script>
                                                            </div>
                                                            <!-- TradingView Widget END -->
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                            <div class="row mt-5" id="researchsectorimportdiv" style="display: none;">
                                                <div class="col-md-12  mt-4">
                                                    <span class="heading ">Call Sectors</span>
                                                    <div class="card mt-3">
                                                        <div class="card-body">
                                                            <div style="width: 100%;height: 100%;"><canvas id="researchsector"></canvas></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- For admin callcount chart -->
                                            <div class="row mt-5" id="callcountchartdiv" style="display: none;">
                                                <div class="col-md-12">
                                                    <span class="heading ">Recent History</span>
                                                    <div class="card mt-3">
                                                        <div class="card-body">
                                                            <div style="width: 100%;height: 10rem;"><canvas id="callcount"></canvas></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>



                                        </div>
                                    </div>
                                </div>

                                <!-- start Research section -->
                                <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab" tabindex="0">
                                    <!-- <iframe src="Research.html" width="100%" style="height: 40rem;" scrolling="no" id="researchframe"></iframe> -->
                                    <div class="row" style="height: 100%;">
                                        <div class="col-md-8">
                                            <p class="heading py-2">Research Publish</p>
                                            <div class="card">
                                                <div class="card-body">
                                                    <form action="" id="researchform">

                                                        <div class="row ">
                                                            <!-- <nav class="">
                                                                <div class="nav nav-underline" id="nav-tab" role="tablist">
                                                                    <a class="nav-link active me-2" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Buy</a>
                                                                    <a class="nav-link me-2" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Sell</a>
                                                                </div>
                                                            </nav> -->

                                                        </div>
                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="radio" name="call_type" id="call_type" value="BUY" />
                                                            <label class="form-check-label" for="inlineRadio1" checked><span class="heading2">BUY</span> </label>
                                                        </div>

                                                        <div class="form-check form-check-inline">
                                                            <input class="form-check-input" type="radio" name="call_type" id="call_type" value="SELL" />
                                                            <label class="form-check-label" for="inlineRadio2"><span class="heading2">SELL</span></label>
                                                        </div>


                                                        <hr class="hr" />
                                                        <div class="row">
                                                            <div class="accordion accordion-flush" id="accordionExampleY">
                                                                <div class="accordion-item">
                                                                    <h2 class="accordion-header" id="headingOneY">
                                                                        <button class="accordion-button" type="button" data-mdb-toggle="collapse" data-mdb-target="#collapseOneY" aria-expanded="true" aria-controls="collapseOneY">
                                                                            <ul class="nav nav-pills " id="ex1" role="tablist">
                                                                                <li class="nav-item" role="presentation">
                                                                                    <a class="nav-link active rounded-pill" id="ex1-tab-1" data-mdb-toggle="pill" href="#ex1-pills-1" role="tab" aria-controls="ex1-pills-1" aria-selected="true" style="height: 34px; width: 6rem; padding: 10px 10px 10px 20px;">Intraday</a>
                                                                                </li>
                                                                                <li class="nav-item" role="presentation">
                                                                                    <a class="nav-link rounded-pill" id="ex1-tab-2" data-mdb-toggle="pill" href="#ex1-pills-1" role="tab" aria-controls="ex1-pills-2" aria-selected="false" style="height: 34px;  width: 6rem; padding: 10px 10px 10px 20px;">Longterm</a>
                                                                                </li>
                                                                                <li>
                                                                                    <i type="button" class=""></i>
                                                                                    <i class=""></i>
                                                                                </li>
                                                                            </ul>
                                                                        </button>
                                                                    </h2>
                                                                    <div id="collapseOneY" class="accordion-collapse collapse hide" aria-labelledby="headingOneY" data-mdb-parent="#accordionExampleY">
                                                                        <div class="accordion-body">
                                                                            <span class="heading2 me-3">Validity</span>
                                                                            <div class="form-check form-check-inline">
                                                                                <input class="form-check-input" type="radio" name="validity" id="validity" value="Year" />
                                                                                <label class="form-check-label" for="inlineRadio1">Year</label>
                                                                            </div>

                                                                            <div class="form-check form-check-inline">
                                                                                <input class="form-check-input" type="radio" name="validity" id="validity" value="Day" checked />
                                                                                <label class="form-check-label" for="inlineRadio2">Day</label>
                                                                            </div>

                                                                            <div class="form-check form-check-inline">
                                                                                <input class="form-check-input" type="radio" name="validity" id="validity" value="Imidiate" />
                                                                                <label class="form-check-label" for="inlineRadio3">Imidiate</label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <hr class=" hr" />
                                                        <div class="row">
                                                            <div class="tab-content mt-2" id="ex1-content">
                                                                <div class="tab-pane fade show active" id="ex1-pills-1" role="tabpanel" aria-labelledby="ex1-tab-1">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <input id="symbol" type="text" class="form-control instrument2 selection" autocomplete="off" style="width: 43rem; font-family:Arial, FontAwesome">
                                                                        </div>
                                                                    </div>
                                                                    <div class="row mt-4">
                                                                        <div class="col-md-4">
                                                                            <input type="number" class="form-control" id="cmp" name="cmp" placeholder="Current Prices">

                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <input type="number" class="form-control" id="stop_loss" name="stop_loss" placeholder="StopLoss">

                                                                        </div>
                                                                        <div class="col-md-4">
                                                                            <input type="number" class="form-control" id="target" name="target" placeholder="Targer">

                                                                        </div>
                                                                    </div>
                                                                    <div class="row mt-4">
                                                                        <div class="col-md-6">
                                                                            <textarea class="form-control" id="remarks" name="remarks" rows="3" placeholder="Remarks"></textarea>

                                                                        </div>
                                                                        <div class="col-md-6">
                                                                            <input type="number" class="form-control" id="accuracy" name="accuracy" placeholder="Accuricy">

                                                                        </div>
                                                                    </div>

                                                                    <div class="row mt-5  d-flex justify-content-center">
                                                                        <button type="button" id="publish" onclick="publishCall('researchform')" class="btn btn-primary btn-block mb-3 w-25">Publish</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- Pills content -->
                                                        </div>
                                                    </form>


                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <span class="heading pt-5">Trending On</span>
                                            <div class="card mt-3">
                                                <div class="list-group">
                                                    <div id="trending1"></div>
                                                    <div id="trending2"></div>
                                                    <div id="trending3"></div>
                                                    <div id="trending4"></div>
                                                </div>
                                            </div>


                                        </div>

                                    </div>


                                    <!-- <div class="researchimportdiv">
                                </div> -->
                                </div>
                                <!-- end Research section -->

                                <!-- start porfolio section -->
                                <div class="tab-pane fade" id="nav-porfolio" role="tabpanel" aria-labelledby="nav-porfolio-tab" tabindex="0">
                                    <!-- <div class="portfolioimportdiv"></div> -->

                                    <div class="row">
                                        <div class="col-md-8">
                                            <p class="heading py-2">Sasikumar's portfoio</p>
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="graph">
                                                        <div style="width: 100%;height: 35rem;"><canvas id="acquisitions"></canvas></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="row">
                                                <p class="heading py-2">Portfolio Highlights</p>
                                                <div class="card">
                                                    <div class="card-body">
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <p class="heading2">Invested</p>
                                                                <span class="heading2 daygain mt-2  btn btn-secondary px-5 py-4" id="portinv"></span>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <p class="heading2">Current</p>
                                                                <span class="heading2 totalgain mt-2 btn btn-secondary px-5 py-4" id="portcurr"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-3">
                                                <p class="heading py-2">Add Investment</p>
                                                <div class="card">
                                                    <div class="card-body">
                                                        <form action="" id="invform">
                                                            <div class="row  mb-4">
                                                                <div class="ui-widget">
                                                                    <input class="form-control instrument" id="inv-search" name="" type="search" placeholder="&#xF002; What are you looking for today?" aria-label="Search" style="width: 20rem; font-family:Arial, FontAwesome">
                                                                </div>
                                                            </div>
                                                            <div class="row  mb-4">
                                                                <div class="qty d-flex justify-content-start">
                                                                    <p class="pe-5 heading2">Quantity</p>
                                                                    <input type=" number" class="form-control" name="qty" id="qty" placeholder="0" value="">
                                                                </div>
                                                            </div>
                                                            <div class="row  mb-4">
                                                                <div class="qty d-flex justify-content-start">
                                                                    <p class="pe-5 heading2">Purchase date</p>
                                                                    <input type="date" class="form-control" placeholder="0" name="purchase_date" id="purchase_date" value="">
                                                                </div>
                                                            </div>
                                                            <div class="row  mb-4">
                                                                <div class="qty d-flex justify-content-start">
                                                                    <p class="pe-5 heading2">Purchase Price</p>
                                                                    <input type="number" class="form-control" placeholder="0" id="purchase_price" name="purchase_price" value="">
                                                                </div>
                                                            </div>
                                                            <div class="row d-flex justify-content-center">
                                                                <button type="button" id="invsubmit" class="btn btn-primary btn-block mb-3 w-50">ADD</button>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <!-- end portfoio section -->

                                <!--start investments section  -->
                                <div class="tab-pane fade" id="nav-investments" role="tabpanel" aria-labelledby="nav-investments-tab" tabindex="0">
                                    <!-- <div class="investmentsimportdiv"></div> -->
                                    <div class="row">
                                        <p class="heading py-2">Investments</p>
                                        <div class="col-md-12 ">
                                            <table class="table" style="width:100%" id="invtable">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Symbol</th>
                                                        <th scope="col">ComPName</th>
                                                        <th scope="col">CMP</th>
                                                        <th scope="col">Quantity</th>
                                                        <th scope="col">Curr.value</th>
                                                        <th scope="col">Invested.value</th>
                                                        <th scope="col">Sector</th>
                                                        <th scope="col">PurchasedIn</th>
                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <!--start reports section  -->
                                <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab" tabindex="0">
                                    <div class="row">
                                        <p class="heading py-2">Stock Reports</p>
                                        <div class="col-md-12 reporttable">
                                            <table id="reporttable" class="table" style="width:100%">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">Date</th>
                                                        <th scope="col">CallType</th>
                                                        <th scope="col">Symbol</th>
                                                        <th scope="col">CompName</th>

                                                        <th scope="col">CMP</th>
                                                        <th scope="col">Stoploss</th>
                                                        <th scope="col">Target</th>
                                                        <!-- <th scope="col">Validity</th> -->
                                                        <!-- <th scope="col">Category</th> -->
                                                        <th scope="col">Remarks</th>
                                                        <th scope="col">Validity</th>
                                                        <th scope="col">Sector</th>
                                                    </tr>
                                                </thead>
                                                <tbody>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <!-- <iframe src="Reports.html" width="100%" style="height: 40rem;" scrolling="no" id="reportframe"></iframe> -->

                                </div>
                                <!--Endreports section  -->

                                <!--start news section  -->
                                <div class="tab-pane fade" id="nav-news" role="tabpanel" aria-labelledby="nav-news-tab" tabindex="0">
                                    <div class="row">
                                        <div id="news"></div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            </div>


            <!-- Button trigger modal -->
            <button type="button" class="btn btn-primary" style="display: none;" id="updatemodel" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                Launch static backdrop modal
            </button>

            <!-- Modal -->
            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog  modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5>Please Update the below details to continue..</h5>
                        </div>
                        <div class="modal-body mt-3">
                            <form class="form" id="updateuserformid" action="" method="">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <fieldset>
                                                <!-- <legend>NAME</legend> -->
                                                <label for="exampleFormControlInput1" class="form-label fw-bold">Name<i class="formstart ps-1 fas fa-asterisk"></i></label>
                                                <input type="text" class="form-control" name="name" id="name" placeholder="Name of User" value="">
                                            </fieldset>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="exampleFormControlInput1" class="form-label fw-bold">Pan Number<i class="formstart ps-1 fas fa-asterisk"></i></label>
                                            <input type="text" class="form-control" name="pan" id="pan" placeholder="Pan Number" value="">
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="exampleFormControlInput1" class="form-label fw-bold">Date of birth<i class="formstart ps-1 fas fa-asterisk"></i></label>
                                            <input type="date" class="form-control" name="dob" id="dob" placeholder="Date of Birth" value="">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="exampleFormControlInput1" class="form-label fw-bold">Gender<i class="formstart ps-1 fas fa-asterisk"></i></label>
                                            <select class="form-select" aria-label="Default select example" name="gender" id="gender">
                                                <option value="Male" selected>Male</option>
                                                <option value="Femal">Femal</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="exampleFormControlInput1" class="form-label fw-bold">Mobile Number<i class="formstart ps-1 fas fa-asterisk"></i></label>
                                            <input type="number" class="form-control" name="mobile" id="mobile" placeholder="Mobile Number" value="">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="exampleFormControlInput1" class="form-label fw-bold">Marital Status</label>
                                            <select class="form-select" aria-label="Default select example" name="mstatus" id="mstatus">
                                                <option value="Married">Married</option>
                                                <option value="Unmarried" selected>Unmarried</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <!-- <div class="col-md-6">
                                                        <div class="mb-3">
                                                            <label for="exampleFormControlInput1" class="form-label fw-bold">Email<i class="formstart ps-1 fas fa-asterisk"></i></label>
                                                            <input type="email" class="form-control" name="email" id="email" placeholder="Email" value="">
                                                        </div>
                                                    </div> -->
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="exampleFormControlInput1" class="form-label fw-bold">Avaiable Groups</label>
                                            <select class="form-select groupSelect" aria-label="Default select example" name="group" id="group">

                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <input type="hidden" class="form-control" name="isfirsttime" id="isfirsttime" placeholder="" value="false">
                                    <input type="hidden" class="form-control" name="roles" id="roles" placeholder="" value="user">
                                    <input type="hidden" class="form-control" name="email" id="email" placeholder="" value="admin@gmail.com">
                                </div>
                                <div class=" row mt-3">
                                    <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                                        <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
                                        <button type="button" style="display: none;" class="btn-close" id="closemodal" data-bs-dismiss="modal" aria-label="Close"></button>
                                        <button class="btn btn-primary me-md-2" type="button" id="updateForm" onclick="updateUser(this.id, 'updateuserformid')" style="">Save</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="staticBackdropLabel">Modal title</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            ...
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary">Understood</button>
                        </div>
                    </div>
                </div> -->
            </div>


            <!-- For alert -->
            <button type="button" class="btn btn-primary" id="liveToastBtn" style="display: none;">Show live toast</button>

            <div id="toast-container" class="toast-container position-static position-fixed bottom-0 end-0 p-3">
                <!-- <div class="toast" id="liveToast" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <i class="far fa-bell me-2 text-primary"></i>
                        <strong class="me-auto">Alert</strong>
                        <small>Just now</small>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        <span class="badge rounded-pill badge-success">BUY</span> Microsoft Corporation @190 SL100 TGT200

                    </div>
                </div> -->
            </div>

            <button type="button" class="btn btn-primary" id="valmodalbtn" data-bs-toggle="modal" style="display: none" data-bs-target="#validationalert">
                Launch demo modal
            </button>

            <div class="modal fade" id="validationalert" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-center">
                    <div class="modal-content">
                        <div class="modal-body text-center">
                            <div id="warnimg" class="d-flex justify-content-center">
                                <img src="./images/Done.gif" width="60%" height="50%" alt="">
                            </div>
                            <p id="toastbody" style="font-weight: 600; font-size: 20px;" class="d-flex justify-content-center text-muted">Saved successfully!</p>
                        </div>
                        <div class="modal-footert d-flex justify-content-center">
                            <button type="button" id="valokbtn" class="btn btn-rounded btn-primary w-25 mb-3 me-3" data-bs-dismiss="modal">Okay</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- End Alerts -->



            <!-- Footer -->
            <!-- Remove thecontainer if you want to extend the Footer to full width. -->
            <div class="footer">
                <!-- Remove thecontainer if you want to extend the Footer to full width. -->
                <div class="">
                    <!-- Footer -->
                    <footer class="text-center text-lg-start">
                        <!-- Grid co ntainer -->
                        <div class=" p-4 pb-0">
                            <!--                    Section: Links -->
                            <section class="">
                                <!--Grid               row-->
                                <div class="row">
                                    <!-- Grid column -->
                                    <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
                                        <h6 class="text-uppercase mb-4 font-weight-bold">
                                            Company name
                                        </h6>
                                        <p>
                                            Here you can use rows and columns to organize your footer
                                            content. Lorem ipsum dolor sit amet, consectetur adipisicing
                                            elit.
                                        </p>
                                    </div>
                                    <!-- Grid column -->

                                    <hr class="w-100 clearfix d-md-none" />

                                    <!-- Grid column -->
                                    <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
                                        <h6 class="text-uppercase mb-4 font-weight-bold">Products</h6>
                                        <p>
                                            <a class="">MDBootstrap</a>
                                        </p>
                                        <p>
                                            <a class="">MDWordPress</a>
                                        </p>
                                        <p>
                                            <a class="">BrandFlow</a>
                                        </p>
                                        <p>
                                            <a class="">Bootstrap Angular</a>
                                        </p>
                                    </div>
                                    <!--                              Grid column -->

                                    <hr class="w-100 clearfix d-md-none" />

                                    <!-- Grid column -->
                                    <hr class="w-100 clearfix d-md-none" />

                                    <!-- Grid column -->
                                    <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
                                        <h6 class="text-uppercase mb-4 font-weight-bold">Contact</h6>
                                        <p><i class="fas fa-home mr-3"></i> New York, NY 10012, US</p>
                                        <p><i class="fas fa-envelope mr-3"></i> info@gmail.com</p>
                                        <p><i class="fas fa-phone mr-3"></i> + 01 234 567 88</p>
                                        <p><i class="fas fa-print mr-3"></i> + 01 234 567 89</p>
                                    </div>
                                    <!-- Grid column -->

                                    <!-- Grid column -->
                                    <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
                                        <h6 class="text-uppercase mb-4 font-weight-bold">Follow us</h6>

                                        <!-- Facebook -->
                                        <a class="btn btn-primary btn-floating m-1" style="background-color: #3b5998" href="#!" role="button"><i class="fab fa-facebook-f"></i></a>

                                        <!-- Twitter -->
                                        <a class="btn btn-primary btn-floating m-1" style="background-color: #55acee" href="#!" role="button"><i class="fab fa-twitter"></i></a>

                                        <!-- Google -->
                                        <a class="btn btn-primary btn-floating m-1" style="background-color: #dd4b39" href="#!" role="button"><i class="fab fa-google"></i></a>

                                        <!-- Instagram -->
                                        <a class="btn btn-primary btn-floating m-1" style="background-color: #ac2bac" href="#!" role="button"><i class="fab fa-instagram"></i></a>

                                        <!-- Linkedin -->
                                        <a class="btn btn-primary btn-floating m-1" style="background-color: #0082ca" href="#!" role="button"><i class="fab fa-linkedin-in"></i></a>
                                        <!-- Github -->
                                        <a class="btn btn-primary btn-floating m-1" style="background-color: #333333" href="#!" role="button"><i class="fab fa-github"></i></a>
                                    </div>
                                </div>
                                <!--Grid row-->
                            </section>
                            <!-- Section: Links -->
                        </div>
                        <!--                   Grid container -->

                        <!-- Copyright -->
                        <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
                            © 2023 Copyright:
                            <a class="" href="https://mdbootstrap.com/">sasi.com</a>
                        </div>
                        <!-- Copyright -->
                    </footer>
                    <!-- Footer -->
                </div>

            </div>
            <!-- End of .Footer -->

        </div>



        <script>

            var topgainerUrl = "https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js";
            var scripChart = 'https://jika.io/embed/area-chart?';
            var enableLoad = 1;
            var availableTags = [];
            var apiAcive = 0;


            $(document).ready(function () {


                // document.getElementById("tooglebtn").click();


                $('#nav-contact-tab').on('click', function () {
                    findAllReport('#reporttable', "pushEngine/calls/findAll");
                });

                $('#nav-investments-tab').on('click', function () {
                    findAllInvestment('#invtable', "pushEngine/investment/findAll");
                });

                $('#invsubmit').on('click', function () {
                    saveInv('invform');
                    //findAllInvestemt('#invfomr', "pushEngine/investment/findAll");
                });

                document.getElementById('nav-porfolio-tab').addEventListener("click", function () {
                    findAllInvestment('#invtable', "pushEngine/investment/findAll");
                    loadInvestChart();
                })

                // static To load the topgainers
                const topGainersData = [
                    { id: 'topgainers1', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/TAL.png', symbol: 'NYSE:TAL' },
                    { id: 'topgainers2', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/VIST.png', symbol: 'NYSE:VIST' },
                    { id: 'topgainers3', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/PSNY.png', symbol: 'NASDAQ:PSNY' },
                    { id: 'topgainers4', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/VIST.png', symbol: 'NYSE:IONQ' },
                    { id: 'topgainers5', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/VIST.png', symbol: 'NYSE:IONQ' },
                    { id: 'topgainers6', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/VIST.png', symbol: 'NYSE:IONQ' },
                    { id: 'topgainers7', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/VIST.png', symbol: 'NYSE:IONQ' },
                    { id: 'topgainers8', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/VIST.png', symbol: 'NYSE:IONQ' }
                ];


                const topLossersData = [
                    { id: 'toplossers1', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/TAL.png', symbol: 'NYSE:TAL' },
                    { id: 'toplossers2', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/VIST.png', symbol: 'NYSE:VIST' },
                    { id: 'toplossers3', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/PSNY.png', symbol: 'NASDAQ:PSNY' },
                    { id: 'toplossers4', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/VIST.png', symbol: 'NYSE:IONQ' },
                    { id: 'toplossers5', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/VIST.png', symbol: 'NYSE:IONQ' },
                    { id: 'toplossers6', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/VIST.png', symbol: 'NYSE:IONQ' },
                    { id: 'toplossers7', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/VIST.png', symbol: 'NYSE:IONQ' },
                    { id: 'toplossers8', logo: 'https://storage.googleapis.com/iexcloud-hl37opg/api/logos/VIST.png', symbol: 'NYSE:IONQ' },
                ];

                const indeces = [
                    { id: 'index1', symbol: 'NASDAQ:IXIC' },
                    { id: 'index2', symbol: 'NASDAQ:NDX' },
                    { id: 'index3', symbol: 'NASDAQ:BANK' }

                ];

                const trending = [
                    { id: 'trending1', symbol: 'NASDAQ:AAPL' },
                    { id: 'trending2', symbol: 'NASDAQ:MSFT' },
                    { id: 'trending3', symbol: 'NASDAQ:TSLA' },
                    { id: 'trending4', symbol: 'CAPITALCOM:US30' }

                ];
                var sector = [{ name: "Consumer Non-Durables" }, { name: "Health Services" }, { name: "Non-Energy Minerals" }, { name: "Consumer Services" }, { name: "Finance" }, { name: "Construction" }, { name: "Information" }, { name: "Finance and Insurance" }, { name: "Educational Services" }, { name: "Health Care and Social Assistance" }, { name: "Accommodation and Food Services" }, { name: "Industrial Services" }, { name: "Energy Minerals" }, { name: "Health Technology" }, { name: "Process Industries" }, { name: "Information" }, { name: "Miscellaneous" }, { name: "Manufacturing" }, { name: "Commercial Services" }, { name: "Technology Services" }, { name: "Distribution Services" }, { name: "Other Services (except Public Administration)" }, { name: "Consumer Durables" }, { name: "Wholesale Trade" }, { name: "Electronic Technology" }, { name: "Public Administration" }, { name: "Producer Manufacturing" }, { name: "Mining, Quarrying, and Oil and Gas Extraction" }, { name: "Government" }, { name: "Communications" }, { name: "Arts, Entertainment, and Recreation" }, { name: "Professional, Scientific, and Technical Services" }, { name: "Retail Trade" }];

                //for dashboard call sector chart
                const piedata = [
                    { sector: sector[1].name, percentage: 10 },
                    { sector: sector[2].name, percentage: 10 },
                    { sector: sector[3].name, percentage: 30 },
                    { sector: sector[4].name, percentage: 10 }
                ];

                //for recent history chart
                var racentHistorydata = [65, 59, 80, 40, 0];


                // var topperformance = [
                //     { name: "NASDAQ:MSFT", displayName: "Microsoft" },
                //     { name: "NASDAQ:AAPL", displayName: "Apple" },
                //     { name: "NASDAQ:TSLA", displayName: "Tesla" },
                //     { name: "NASDAQ:AMZN", displayName: "Amazon" },
                // ];

                var topperformance = [{ "name": "NASDAQ:AAPL", "displayName": "Apple Inc" }, { "name": "NASDAQ:DKNG", "displayName": "DraftKings Inc." }, { "name": "NASDAQ:TLT", "displayName": "BlackRock Institutional Trust Company N.A." }]

                //indices
                indeces.forEach(({ id, logo, symbol }) => {
                    loadTopGainersandLossers(id, '', symbol, topgainerUrl);
                });
                loadtopsectors();
                loadNews();


                //portfolioPieChart(piedata);
                if (11 == 1) {
                    topGainersData.forEach(({ id, logo, symbol }) => {
                        loadTopGainersandLossers(id, logo, symbol, topgainerUrl);
                    });
                    topLossersData.forEach(({ id, logo, symbol }) => {
                        loadTopGainersandLossers(id, logo, symbol, topgainerUrl);
                    });

                    trending.forEach(({ id, logo, symbol }) => {
                        loadTrendings(id, symbol);
                    });
                    PerformanceDataBuilder(topperformance)
                    // portfolioPieChart(piedata);
                    // researchSectorChart(piedata);
                    // cratecallcountchart();
                    // loadNews();
                }
                dashbordCallSectorChart(piedata);
                //loadtopsectors();
                //portfolioPieChart(piedata);//for portfolio chart
                recentHistoryChart(racentHistorydata);
            });
        </script>


        <!-- For UI display  -->
        <script>

            document.addEventListener("DOMContentLoaded", function () {
                document.getElementById("explorelink").click();
                // Need to to SPARK-18
                // document.getElementById("updatemodel").click();
                // loadGroup();
                findAllDashbordData('#dashbordtable', "pushEngine/calls/findAll");

                console.log("ready");


                const toastTrigger = document.getElementById('liveToastBtn');
                const toastLiveExample = document.getElementById('liveToast')

                if (toastTrigger) {
                    console.log("toastTrigger");
                    const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample)
                    toastTrigger.addEventListener('click', () => {
                        toastBootstrap.show()
                    })
                }

                // for fetching the gainer
                getGainers();
                getLoosers();
                getVolume();
                getMostActive();
            });

            var tab = 0;
            var exploreid = document.getElementById("explorelink");
            var dashbordid = document.getElementById("dashbordlink");
            settingid;
            var dashbordspan = document.getElementById("dashbordspan");
            var settingid = document.getElementById("settingid");
            exploreid.addEventListener("click", function () {
                console.log("Inside explore");
                tab = 1;
                changeNav();
                //reload();
            });
            dashbordid.addEventListener("click", function () {
                console.log("Inside dashbord");
                tab = 2;
                changeNav();

                /* Loading the Dashboard Table */
            });
            dashbordspan.addEventListener("click", function () {
                console.log("Inside dashbord");
                tab = 2;
                changeNav();
            });
            settingid.addEventListener("click", function () {
                console.log("setting");
                document.getElementById("settingdiv").style.display = "";
                document.getElementById("maincontainer").style.display = "none";
                issettingactive = 1;
            });

            function changeNav() {
                if (tab === 1) {
                    document.getElementById("dashborddiv").style.display = "none";
                    document.getElementById("otherDashbord").style.display = "";
                    document.getElementById("allcalls").style.display = "";
                    document.getElementById("settingdiv").style.display = "none";
                    document.getElementById("maincontainer").style.display = "";
                    document.getElementById("nonscripcontainer").style.display = "";
                    document.getElementById("scripcontainer").style.display = "none";

                    document.getElementById("MarketOverview").style.display = "";
                    document.getElementById("allcallsList").style.display = "";
                    document.getElementById("callcountchartdiv").style.display = "none";
                    document.getElementById("researchsectorimportdiv").style.display = "none";
                    document.getElementById("stockNavMenus").style.display = "";

                }
                if (tab === 2) {

                    document.getElementById("stockNavMenus").style.display = "none";
                    document.getElementById("dashborddiv").style.display = "";
                    document.getElementById("otherDashbord").style.display = "none";
                    document.getElementById("allcalls").style.display = "none";
                    document.getElementById("settingdiv").style.display = "none";
                    document.getElementById("maincontainer").style.display = "";
                    document.getElementById("maincontainer").style.display = "";
                    document.getElementById("nonscripcontainer").style.display = "";
                    document.getElementById("scripcontainer").style.display = "none";

                    document.getElementById("MarketOverview").style.display = "none";
                    document.getElementById("allcallsList").style.display = "none";
                    document.getElementById("callcountchartdiv").style.display = "";
                    document.getElementById("researchsectorimportdiv").style.display = "";
                }
            }

            function tooglesuccessmodal(val) {
                const myModal = document.getElementById("tooglebtn");
                document.getElementById("modalbody").innerHTML = val;
                myModal.click();
            }
            function toogledangermodal(val) {
                const myModal = document.getElementById("tooglebtn2");
                document.getElementById("modalbody2").innerHTML = val;
                myModal.click();
            }

            const exampleModal = document.getElementById("exampleModal");
            if (exampleModal) {
                exampleModal.addEventListener("show.bs.modal", (event) => {
                    const button = event.relatedTarget;
                    const recipient = button.getAttribute("data-bs-whatever");
                    const modalTitle = exampleModal.querySelector(".modal-title");
                    const modalBodyInput = exampleModal.querySelector(".modal-body input");

                    modalTitle.textContent = `New message to ${recipient}`;
                    modalBodyInput.value = recipient;
                });
            }

            //research handler
            function publishCall(formid) {
                console.log("call insert");
                var param = getFormValues(formid);
                if (formid == 'researchform')
                    param += "&symbol=" + rsymbol + "&compName=" + rcompName;
                else
                    param += "&symbol=" + ssymbol + "&compName=" + scompName;

                var url = "pushEngine/calls/insert?" + param;

                getRequestTo(url, "POST", function (userData) {
                    //alert(userData);
                });

                document.getElementById(formid).reset();
                findAllReport("#reporttable", "pushEngine/calls/findAll");
                findAllDashbordData('#dashbordtable', "pushEngine/calls/findAll")
                //console.log(response);
            }


            //report handler
            function findAllReport(tableid, url) {
                $.ajax({
                    type: "POST",
                    url: url,
                    dataType: "json",
                    success: function (userData) {
                        if ($.fn.DataTable.isDataTable(tableid)) {
                            $(tableid).DataTable().destroy();
                        }
                        $(tableid).DataTable({
                            data: userData,
                            "autoWidth": false,
                            columns: [
                                // <span class="badge rounded-pill badge-primary">1 sec ago</span>
                                { data: "creationdate" },
                                {
                                    data: "call_type",
                                    render: function (data, type, row) {
                                        if (type === 'display') {
                                            if (data === 'BUY') {
                                                return '<span class="badge rounded-pill badge-success">' + data + '</span>';
                                            }
                                            if (data === 'SELL') {
                                                return '<span class="badge rounded-pill badge-danger">' + data + '</span>';
                                            }
                                            else {
                                                return data;
                                            }
                                        } else {
                                            return data;
                                        }
                                    }
                                },
                                // { data: "call_type" },
                                { data: "symbol" },
                                { data: "compName" },
                                { data: "cmp" },
                                { data: "stop_loss" },
                                { data: "target" },
                                { data: "remarks" },
                                { data: "validity" },
                                { data: "sector" }],
                        });
                    },
                    error: function (xhr, status, error) {
                        console.error("AJAX request failed:", status, error);
                    },
                });
            }


            // Investment Handler
            function saveInv(formid) {
                console.log("saevinv");
                var param = getFormValues(formid);
                param += "&symbol=" + isymbol + "&compName=" + icompName;
                console.log(param);
                var url = "pushEngine/investment/insert?" + param;
                getRequestTo(url, "POST", function (userData) {
                    console.log("response " + userData);
                    // alert(userData);
                });
                document.getElementById(formid).reset();
                findAllInvestment('#invtable', "pushEngine/investment/findAll");
            }

            function findAllInvestment(tableid, url) {
                $.ajax({
                    type: "POST",
                    url: url,
                    dataType: "json",
                    success: function (userData) {
                        if ($.fn.DataTable.isDataTable(tableid)) {
                            $(tableid).DataTable().destroy();
                        }
                        var dataTable = $(tableid).DataTable({
                            // $(tableid).DataTable({
                            data: userData,
                            columns: [
                                { data: "symbol" },
                                { data: "compName" },
                                { data: "compName" },
                                { data: "qty" },
                                { data: "current_value" },
                                { data: "invested_value" },
                                { data: "sector" },
                                { data: "purchase_date" }
                            ],
                        });
                        var investedValueSum = 0;
                        var currentValueSum = 0;

                        // Verify that the DataTable and columns exist
                        if (dataTable && dataTable.column('invested_value:name') && dataTable.column('current_value:name')) {
                            dataTable.rows().every(function () {
                                var row = this.data();
                                var investedValue = parseFloat(row.invested_value);
                                var currentValue = parseFloat(row.current_value);
                                if (!isNaN(investedValue)) {
                                    investedValueSum += investedValue;
                                }
                                if (!isNaN(currentValue)) {
                                    currentValueSum += currentValue;
                                }
                            });

                            document.getElementById("portinv").innerHTML = "";
                            document.getElementById("portinv").innerHTML = investedValueSum;
                            document.getElementById("portcurr").innerHTML = "";
                            document.getElementById("portcurr").innerHTML = currentValueSum;
                            console.log("Total Invested Value: " + investedValueSum);
                            console.log("Total Current Value: " + currentValueSum);
                        } else {
                            console.log("DataTable, 'invested_value' column, or 'current_value' column not found.");
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error("AJAX request failed:", status, error);
                    },
                });
                loadInvestChart();
            }

            //logout
            document.getElementById("logoutBtn").addEventListener("click", function () {
                fetch('loginHandler/login/logout', {
                    method: 'POST',
                })
                    .then(response => {
                        if (response.status === 200) {
                            window.location.href = 'http://localhost:8070/sprak/Index.html';
                        } else {
                            console.error('Logout failed');
                        }
                    })
                    .catch(error => {
                        console.error('Network error:', error);
                    });
            });

            //formmodel

            function loadGroup() {
                var url = "pushEngine/group/findAll";
                $.ajax({
                    type: "POST",
                    url: url,
                    dataType: "json",
                    success: function (userData) {
                        populateSelectBoxes(userData);
                    }
                });
            }

            // select
            const nameSelects = document.querySelectorAll('.groupSelect');
            function populateSelectBoxes(data) {
                nameSelects.forEach((select, index) => {
                    const placeholder = `Select a Group (${index + 1})`;
                    select.innerHTML = `<option value="">${placeholder}</option>`;
                    data.forEach(item => {
                        const option = document.createElement('option');
                        option.value = item.name;
                        option.textContent = item.name;
                        select.appendChild(option);
                    });
                });
            }

            //dashbord table
            //var userData;
            function findAllDashbordData(tableid, urls) {
                var url = urls;
                var allcallsData = [];
                $.ajax({
                    type: "POST",
                    url: url,
                    dataType: "json",
                    async: false,
                    success: function (userData) {
                        if ($.fn.DataTable.isDataTable(tableid)) {
                            $(tableid).DataTable().destroy();
                        }

                        // Initialize the DataTable
                        var dataTable = $(tableid).DataTable({
                            data: userData,
                            scrollX: "500px",
                            // "autoWidth": false,
                            columns: [
                                { data: "creationdate" },
                                //{ data: "call_type" },
                                {
                                    data: "call_type",
                                    render: function (data, type, row) {
                                        if (type === 'display') {
                                            if (data === 'BUY') {
                                                return '<span class="badge rounded-pill badge-success">' + data + '</span>';
                                            }
                                            if (data === 'SELL') {
                                                return '<span class="badge rounded-pill badge-danger">' + data + '</span>';
                                            }
                                            else {
                                                return data;
                                            }
                                        } else {
                                            return data;
                                        }
                                    }
                                },
                                { data: "symbol" },
                                { data: "cmp" },
                                { data: "stop_loss" },
                                { data: "target" },
                                { data: "validity_date" },
                            ],

                        });

                        console.log(allcallsData);

                        // Retrieve the data from the DataTable
                        console.log(dataTable.columns().header().toArray());

                        allcallsData = dataTable.rows().data().toArray();

                        // Adjust the column indices to match your DataTable's column order
                        allcallsData = userData.map(row => ({
                            compName: row.symbol,       // Assuming "symbol" is in the 3rd column (0-based index)
                            stoplossprc: row.stop_loss,    // Assuming "stop_loss" is in the 5th column
                            cmpprc: row.cmp,         // Assuming "cmp" is in the 4th column
                            tagetprc: row.target,       // Assuming "target" is in the 6th column
                            logo: row.logo,       // Assuming "target" is in the 6th column
                        }));

                        console.log(allcallsData);



                        dataTable.columns([2, 3, 4, 5]).nodes().to$().css({ "white-space": "nowrap !important" });

                        // Get the row count for all records
                        var allRowCount = dataTable.rows().count();

                        // Get the row count for records with today's date >= validity
                        var today = new Date(); // Today's date
                        var todayRowCount = dataTable.rows().eq(0).filter(function (rowIdx) {
                            var rowData = dataTable.row(rowIdx).data();
                            var validityDate = new Date(rowData.validity_date); // Parse the validity date from the data

                            // Compare today's date with validity date
                            return today <= validityDate;
                        }).count();

                        // Get the row count for records with today's date = creation date
                        var todayDate = today.toISOString().split('T')[0]; // Today's date in ISO format
                        var todayDateRowCount = dataTable.rows().eq(0).filter(function (rowIdx) {
                            var rowData = dataTable.row(rowIdx).data();
                            var creationDate = rowData.creationdate.split(' ')[0]; // Parse the date from the "creationdate" value

                            // Compare today's date with creation date
                            return todayDate === creationDate;
                        }).count();

                        console.log('All Rows: ' + allRowCount);
                        console.log('Today >= Validity: ' + todayRowCount);
                        console.log('Today = Creation Date: ' + todayDateRowCount);


                        document.getElementById("dash-total-calls").innerHTML = "";
                        document.getElementById("dash-total-calls").innerHTML = allRowCount;

                        document.getElementById("dash-total-calls1").innerHTML = "";
                        document.getElementById("dash-total-calls1").innerHTML = allRowCount;
                        document.getElementById("dash-current-calls").innerHTML = "";
                        document.getElementById("dash-current-calls").innerHTML = todayRowCount;

                        document.getElementById("dash-current-calls1").innerHTML = "";
                        document.getElementById("dash-current-calls1").innerHTML = todayRowCount;
                        document.getElementById("dash-today-calls").innerHTML = "";
                        document.getElementById("dash-today-calls").innerHTML = todayDateRowCount;

                    },
                    error: function (xhr, status, error) {
                        //document.getElementById("valmodalbtn").click();
                        // alert("Something went wrong!", 0);
                        console.error("AJAX request failed:", status, error);
                    }
                });
                findAllCallsData(allcallsData);
            }


            //stock all calls
            function findAllCallsData(userData) {

                console.log("findAllCallsData userData " + userData);

                // Assuming your response data is stored in a variable called 'userData'
                // const userData = [
                //     { compName: 'Canara Bank', stoplossprc: '19,674.25', cmpprc: '19,674.25', tagetprc: '19,674.25' },
                //     { compName: 'Canara Bank', stoplossprc: '19,674.25', cmpprc: '19,674.25', tagetprc: '19,674.25' },
                //     // Add more data objects as needed
                // ];

                // Get the parent element where you want to append the list items'
                document.getElementById('allcallscard').innerHTML = "";
                var listContainer = document.getElementById('allcallscard');
                listContainer =
                    // Loop through the userData array and create list items
                    userData.forEach((data, index) => {
                        // Create the list item
                        var listItem = document.createElement('li');
                        listItem.innerHTML = "";
                        listItem.className = 'list-group-item d-flex justify-content-between align-items-center';
                        const innerContent = `
                               <div class="d-flex align-items-center">
                                <img src="${data.logo}" alt="" style="width: 45px; height: 45px" class="rounded-circle" />
                                    <div class="ms-3" style="min-width: 10rem;">
                                    <p class="fw-bold mb-1">${data.compName}</p>
                                <p class="text-muted mb-0" style="font-size: 13px;"><span class="stoplossprc">${data.stoplossprc}</span>&nbsp; &nbsp;|<span class="cmpprc ms-1">${data.cmpprc}</span> &nbsp; &nbsp;|<span class="tagetprc ms-1">${data.tagetprc}</span></p>
                                </div>
                                 <span class="badge rounded-pill badge-primary">1 sec ago</span>
                        `;
                        // Set the inner HTML of the list item
                        listItem.innerHTML = innerContent;

                        // console.log(listItem);
                        // Append the list item to the container
                        listContainer.appendChild(listItem);
                    });
            }

            //Call Alert

            function findCallAlert() {
                console.log("find call alert");
                $.ajax({
                    type: "POST",
                    url: 'pushEngine/calls/findAllAlert',
                    dataType: "json",
                    success: function (userData) {
                        console.log(userData);
                    },
                    error: function (xhr, status, error) {
                        console.error("AJAX request failed:", status, error);
                    },
                });
            }
            // setInterval(findCallAlert, 1000);




            //common

            function getRequestTo(url, requestType, callback) {
                console.log("getRequestTo");
                var url = url;

                $.ajax({
                    type: requestType,
                    url: url,
                    success: function (userData) {
                        if (!url.includes("json")) {
                            //alert(userData);
                            document.getElementById("valmodalbtn").click();
                        }
                        callback(userData);
                    },
                    error: function (xhr, status, error) {
                        callback(status, error);
                    },
                });
            }



            // Web soket
            if (11 = 1) {
                const messageContainer = document.getElementById("message-container");

                const socket = new WebSocket("ws://localhost:8060");

                // Connection opened
                socket.addEventListener("open", (event) => {
                    socket.send("Hello Server!");
                });

                // Listen for messages
                socket.addEventListener("message", (event) => {
                    const message = event.data;
                    document.getElementById('toast-container').innerHTML = "";
                    showMessage(message);
                });

                // Connection closed
                socket.addEventListener("close", (event) => {
                    if (event.wasClean) {
                        console.log(`Closed cleanly, code=${event.code}, reason=${event.reason}`);
                    } else {
                        console.error(`Connection died`);
                    }
                });

                // Handle errors
                socket.addEventListener("error", (event) => {
                    console.error(`Error: ${event.message}`);
                });

                function showMessage(message) {
                    //for gainers
                    //Gainers["UDMY","RDFN"]

                    if (message.includes("Gainers:")) {
                        message = message.replace("Gainers:", "");
                        const res = JSON.parse(message);
                        var topGainersData = res;
                        topGainersData.forEach(({ id, logo, symbol }) => {
                            loadTopGainersandLossers(id, logo, symbol, topgainerUrl);
                        });
                        return;
                    }
                    if (message.includes("Loosers:")) {
                        message = message.replace("Loosers:", "");
                        const res = JSON.parse(message);
                        var topLossersData = res;
                        topLossersData.forEach(({ id, logo, symbol }) => {
                            loadTopGainersandLossers(id, logo, symbol, topgainerUrl);
                        });
                        return;
                    }
                    if (message.includes("Volume:")) {
                        message = message.replace("Volume:", "");
                        const res = JSON.parse(message);
                        console.log("res " + res);
                        PerformanceDataBuilder(res);
                        return;
                    }

                    if (message.includes("MostActive:")) {
                        message = message.replace("MostActive:", "");
                        const res = JSON.parse(message);
                        console.log("res " + res);
                        var trending = res;
                        trending.forEach(({ id, logo, symbol }) => {
                            loadTrendings(id, symbol);
                        });
                        return;
                    }


                    //For call alert
                    const showToastButton = document.getElementById('liveToastBtn');
                    const toastContainer = document.getElementById('toast-container');


                    showToastButton.addEventListener('click', () => {
                        createToast('NEW CALL', message);
                    });

                    function createToast(type, message) {
                        const toast = document.createElement('div');
                        toast.classList.add('toast');
                        toast.setAttribute('role', 'alert');
                        toast.setAttribute('aria-live', 'assertive');
                        toast.setAttribute('aria-atomic', 'true');

                        const toastHeader = document.createElement('div');
                        toastHeader.classList.add('toast-header');

                        const icon = document.createElement('i');
                        icon.classList.add('far', 'fa-bell', 'me-2', 'text-primary');

                        const strong = document.createElement('strong');
                        strong.classList.add('me-auto');
                        strong.textContent = 'Alert';

                        const small = document.createElement('small');
                        small.textContent = 'Just now';

                        const closeButton = document.createElement('button');
                        closeButton.setAttribute('type', 'button');
                        closeButton.classList.add('btn-close');
                        closeButton.setAttribute('data-bs-dismiss', 'toast');
                        closeButton.setAttribute('aria-label', 'Close');

                        const toastBody = document.createElement('div');
                        toastBody.classList.add('toast-body');
                        toastBody.innerHTML = `<span class="badge rounded-pill badge-success">${type}</span> ${message}`;

                        toastHeader.appendChild(icon);
                        toastHeader.appendChild(strong);
                        toastHeader.appendChild(small);
                        toastHeader.appendChild(closeButton);

                        toast.appendChild(toastHeader);
                        toast.appendChild(toastBody);

                        toastContainer.innerHTML = "";
                        toastContainer.appendChild(toast);

                        // Initialize the Bootstrap Toast for the newly created element
                        const bsToast = new bootstrap.Toast(toast);
                        bsToast.show();
                    }

                    showToastButton.click();

                }



            }


            function getGainers() {
                console.log("gainers");
                var param = "restype=json";
                var url = "fetchEngine/commonwisefetch/gainers?" + param;

                getRequestTo(url, "GET", function (message) {
                    //message = message.replace("Gainers:", "");
                    const res = JSON.parse(message);
                    //console.log("res" + res);
                    var topGainersData = res;
                    topGainersData.forEach(({ id, logo, symbol }) => {
                        loadTopGainersandLossers(id, logo, symbol, topgainerUrl);
                    });
                    return;
                });
            }

            function getLoosers() {
                var param = "restype=json";
                var url = "fetchEngine/commonwisefetch/lossers?" + param;

                getRequestTo(url, "GET", function (message) {
                    message = message.replace("Loosers:", "");
                    const res = JSON.parse(message);
                    //console.log("res" + res);
                    var topLossersData = res;
                    topLossersData.forEach(({ id, logo, symbol }) => {
                        loadTopGainersandLossers(id, logo, symbol, topgainerUrl);
                    });
                    return;
                });
            }

            function getMostActive() {
                var param = "restype=json";
                var url = "fetchEngine/commonwisefetch/mostactive?" + param;

                getRequestTo(url, "GET", function (message) {
                    const res = JSON.parse(message);
                    var trending = res;
                    trending.forEach(({ id, logo, symbol }) => {
                        loadTrendings(id, symbol);
                    });
                    return;
                });
            }
            function getVolume() {
                console.log("getVolume");
                var param = "restype=json";
                var url = "fetchEngine/commonwisefetch/marketVolume?" + param;

                getRequestTo(url, "GET", function (message) {
                    //  message = message.replace("volume:", "");
                    const res = JSON.parse(message);
                    console.log("res" + res);
                    PerformanceDataBuilder(res);
                    return;
                });
            }

            //for portflio graph


            function loadInvestChart() {
                var param = "restype=json";
                var url = "pushEngine/investment/sectorPercentage? " + param;
                getRequestTo(url, "POST", function (message) {
                    //  message = message.replace("volume:", "");
                    const res = JSON.parse(message);
                    console.log("res" + res);
                    portfolioPieChart(res);
                    return;
                });
            }


        </script>

        <script src="./js/nav-autoComplete.js"></script>
        <script src="./js/search-nav.js"></script>
        <script src="./js/search-autoComplete.js"></script>
        <script src="./js/search-symbol.js"></script>
        <script src="./js/inv-autoComplete.js"></script>
        <script src="./js/search-inv.js"></script>

        <!-- <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script> -->

        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.1/mdb.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.1/mdb.min.js"></script>



    </body>

</html>